/*! For license information please see main.c9785b3a.chunk.js.LICENSE.txt */
(this.webpackJsonpS2R2=this.webpackJsonpS2R2||[]).push([[0],{202:function(e,a,t){},214:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),o=t.n(c),l=t(15),i=t(7),u=t(9),s=t(272),m=t(264),d=t(263),p=t(303),f=t(271),E=t(299),h=t(275),g=t(274),b=t(85),v=t.n(b),y=t(43),O=t(261),j=t(76),k=Object(j.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),w=t(133),S=t.n(w),C=t(83),A=t(84),x=t(97),N=t(96),I="current-user",_=r.a.createContext(),R=function(e){Object(x.a)(t,e);var a=Object(N.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={user:JSON.parse(localStorage.getItem(I)||"{}")},e.handleUserChange=function(a){e.setState({user:a}),a?localStorage.setItem(I,JSON.stringify(a)):localStorage.removeItem(I)},e.isAuthenticated=function(){return!!(e.state.user&&e.state.user.data&&e.state.user.data.email)},e}return Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement(_.Provider,{value:{user:this.state.user,onUserChange:this.handleUserChange,isAuthenticated:this.isAuthenticated}},this.props.children)}}]),t}(n.Component),P=function(e){return function(a){return r.a.createElement(_.Consumer,null,(function(t){return r.a.createElement(e,Object.assign({},t,a))}))}},T=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://s2r2.app/api",REACT_APP_DEV_API:"http://localhost:3001/api",REACT_APP_DEV_BASE_URL:"http://localhost:3000",REACT_APP_PRO_BASE_URL:"https://s2r2.app"}),B=T.NODE_ENV,D=T.REACT_APP_API_URL,F=T.REACT_APP_DEV_API,W=T.REACT_APP_DEV_BASE_URL,U=T.REACT_APP_PRO_BASE_URL,L=function(){return"development"===B},q=S.a.create({baseURL:L()?F:D,withCredentials:!0,dataType:"jsonp"});q.interceptors.response.use((function(e){return e}),(function(e){if(403!==e.response.status)return Promise.reject(e);localStorage.removeItem(I);var a=L()?W:U;window.location.assign("".concat(a,"/sign-in"))}));var H=q,V={register:function(e){return H.post("/register",e)},authenticate:function(e){return H.post("/signin",e)},logout:function(){return H.post("/logout")}},J=t(53),K=t(273);var Q=P((function(e){var a=k(),t=r.a.useState(""),n=Object(u.a)(t,2),c=n[0],o=n[1],b=r.a.useState({email:"",password:""}),j=Object(u.a)(b,2),w=j[0],S=j[1],C=r.a.useState(!1),A=Object(u.a)(C,2),x=A[0],N=A[1],I=function(e){return function(a){return S(Object(i.a)(Object(i.a)({},w),{},Object(l.a)({},e,a.target.value)))}};return r.a.createElement(O.a,{component:"main",maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(m.a,{className:a.avatar},r.a.createElement(v.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,onSubmit:function(a){a.preventDefault(),N(!0),V.authenticate(w).then((function(a){N(!1),e.onUserChange(a)}),(function(e){console.log(e);var a=e.response.data;o(a.message),N(!1)}))}},r.a.createElement(p.a,{onChange:I("email"),value:w.email||"",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,type:"email"}),r.a.createElement(p.a,{onChange:I("password"),value:w.password||"",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password",name:"password",autoComplete:"off",type:"password"}),r.a.createElement(f.a,{control:r.a.createElement(E.a,{value:"remember",color:"primary"}),label:"Remember me"}),!!c&&r.a.createElement("div",null," ",c," "),r.a.createElement(s.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},x?r.a.createElement(K.a,{className:a.progress,color:"secondary"}):"Sign In"),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:!0},r.a.createElement(h.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(g.a,{item:!0})))))})),z=t(14),G=t.n(z),M=t(23),Y=t(300),Z=t(276),X=t(135),$=t.n(X),ee=t(136),ae=t.n(ee),te=t(221),ne=t(40),re=r.a.forwardRef((function(e,a){return r.a.createElement(ne.b,Object.assign({innerRef:a},e))})),ce="/user",oe=function(e){return H.get("".concat(ce,"/").concat(e)).then((function(e){return e.data}))},le=function(){return H.get("".concat(ce)).then((function(e){return e.data})).catch((function(e){return[{error:e.response?e.response.data.message:e.message}]}))},ie=function(e){return function(a){return H.put("".concat(ce,"/").concat(e),a).then((function(e){return e.data}))}},ue=function(e){return H.delete("".concat(ce,"/").concat(e))};var se=P((function(e){var a=e.match.params.id,t=k(),c=Object(n.useState)(!1),o=Object(u.a)(c,2),E=o[0],b=o[1],j=r.a.useState(""),w=Object(u.a)(j,2),S=w[0],C=w[1],A=Object(n.useState)(!1),x=Object(u.a)(A,2),N=x[0],I=x[1],_=Object(n.useState)({email:"",password:"",name:"",lastName:"",role:"student"}),R=Object(u.a)(_,2),P=R[0],T=R[1],B=function(){var e=Object(M.a)(G.a.mark((function e(a){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(a);case 2:t=e.sent,T(t);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){a&&B(a)}),[a]);var D=function(e){return function(a){return T(Object(i.a)(Object(i.a)({},P),{},Object(l.a)({},e,a.target.value)))}};return E?r.a.createElement(J.a,{to:"/students"}):r.a.createElement(O.a,{component:"main",maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(m.a,{className:t.avatar},r.a.createElement(v.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,onSubmit:function(e){e.preventDefault(),(a?ie(a):V.register)(P).then((function(e){return b(!0)}),(function(e){var a=e.response.data;C(a.message)}))},autoComplete:"off"},r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(te.a,{row:!0},r.a.createElement(Z.a,{row:!0,name:P.role,value:P.role,onChange:D("role")},r.a.createElement(f.a,{value:"teacher",control:r.a.createElement(Y.a,null),label:"Teacher"}),r.a.createElement(f.a,{value:"student",control:r.a.createElement(Y.a,null),label:"Student"})))),r.a.createElement(g.a,{item:!0,xs:12,sm:6},r.a.createElement(p.a,{autoComplete:"off",name:"name",onChange:D("name"),value:P.name||"",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(g.a,{item:!0,xs:12,sm:6},r.a.createElement(p.a,{onChange:D("lastName"),value:P.lastName||"",variant:"outlined",fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"off"})),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(p.a,{disabled:!!a,onChange:D("email"),value:P.email||"",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"none"})),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(p.a,{onChange:D("password"),value:P.password||"",variant:"outlined",required:!a,fullWidth:!0,name:"password",label:"password",type:N?"text":"password",id:"password",autoComplete:"none",InputProps:{endAdornment:N?r.a.createElement($.a,{onClick:function(){return I(!1)}}):r.a.createElement(ae.a,{onClick:function(){return I(!0)}})}}))),!!S&&r.a.createElement("div",null," ",S," "),r.a.createElement(s.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},a?"Update ".concat(P.name):"Register a new ".concat(P.role)),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:!0},r.a.createElement(h.a,{href:"/",variant:"body2",color:"secondary"},"Cancel and go back")),!a&&r.a.createElement(g.a,{item:!0},r.a.createElement(h.a,{to:"/students",component:re,variant:"body2"},"Do you wanna check if the user exist?"))))))})),me=Object(j.a)((function(e){return{button:{margin:e.spacing(1)},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)},iconSmall:{fontSize:20}}}));function de(e){var a=e.buttons,t=me();return r.a.createElement("div",null,a.map((function(e,a){var n=e.label,c=e.Icon,o=e.link;return r.a.createElement(s.a,{to:o,key:a,component:re,variant:"contained",color:a?"default":"primary",className:t.button},n,r.a.createElement(c,{className:t.rightIcon}))})))}de.defaultProps={buttons:[]};var pe=function(){return r.a.createElement(y.a,{variant:"h3",component:"h2",gutterBottom:!0},"S",r.a.createElement("sup",null,"2"),"R",r.a.createElement("sup",null,"2")," PROJECT")},fe=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(2),marginTop:"auto",backgroundColor:"white"}}}));var Ee=P((function(e){var a=e.user,t=e.onUserChange,n=a.data;return r.a.createElement(y.a,{variant:"body2",color:"textSecondary"},"Hello ".concat(n.name,", here you can "),r.a.createElement(h.a,{to:"/user/".concat(n.id,"/edit"),component:re,color:"primary"},"edit your profile")," or simply  ",r.a.createElement(h.a,{to:"/",onClick:function(){return t()},component:re,color:"secondary"},"logout")," from the site")})),he=t(91),ge=t.n(he),be=t(107),ve=t.n(be),ye=t(137),Oe=t.n(ye),je=t(138),ke=t.n(je),we=t(140),Se=t.n(we),Ce=t(141),Ae=t.n(Ce),xe=t(139),Ne=t.n(xe),Ie=function(e){return"teacher"===e?[{label:"New Record",Icon:ge.a,link:"/new-record"},{label:"Check Recordings",Icon:ve.a,link:"/recordings"},{label:"New Student",Icon:Oe.a,link:"/user"},{label:"Check Students",Icon:ke.a,link:"/students"}]:[{label:"Check sessions",Icon:ve.a,link:"/recordings"},{label:"Strategies",Icon:Ne.a,link:"/strategies"},{label:"EFL Profile",Icon:Se.a,link:"/efl"},{label:"Emotions",Icon:Ae.a,link:"/emotions"}]},_e=function(e){return function(a,t,n){return Object(i.a)(Object(i.a)({},a),function(e,a){return e.map((function(e){return delete e._id&&e})).map((function(e){return Object.values(e).some((function(e){return e[a]}))})).some((function(e){return!e}))}(t,n)?{hasError:!0,errors:Object(l.a)({},e,"At least one value should be selected for both students.")}:Object(l.a)({hasError:!1},e,t))}};var Re=P((function(e){var a=e.user,t=fe(),n=a.data.role;return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,null),r.a.createElement(O.a,{component:"main",className:t.main,maxWidth:"sm"},r.a.createElement(pe,null),r.a.createElement(y.a,{variant:"h5",component:"h2",gutterBottom:!0},"A simple App for voice recording and speech recognition analysis."),r.a.createElement(y.a,{variant:"body1"},"What do you want to do now?"),r.a.createElement(de,{buttons:Ie(n)})),r.a.createElement("footer",{className:t.footer},r.a.createElement(O.a,{maxWidth:"sm"},r.a.createElement(y.a,{variant:"body1"},"Customization"),r.a.createElement(Ee,null))))})),Pe=Object(j.a)((function(e){return{appBar:{position:"relative"},layout:Object(l.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(900+2*e.spacing(2)),{width:900,marginLeft:"auto",marginRight:"auto"}),paper:Object(l.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(900+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},progress:{margin:e.spacing(2)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},table:{minWidth:650}}})),Te=t(290),Be=t(294),De=t(293),Fe=t(291),We=t(292),Ue=t(109),Le="/recording",qe=function(e){return Object(i.a)(Object(i.a)({},e),{},{studentA:e.students[0],studentB:e.students[1],labels:e.participants.map((function(e){return e.name}))})},He=function(e){return H.post(Le,e).then((function(e){var a=e.data;return qe(a)}))},Ve=function(e){return H.get("".concat(Le,"/").concat(e)).then((function(e){var a=e.data;return qe(a)}))},Je=function(){return H.get("".concat(Le)).then((function(e){return e.data.map(qe)})).catch((function(e){return[{error:e.response?e.response.data.message:e.message}]}))},Ke=function(e,a){return H.put("".concat(Le,"/").concat(e),a).then((function(e){var a=e.data;return qe(a)}))},Qe=function(e){return H.delete("".concat(Le,"/").concat(e))},ze=function(e,a){return H.put("".concat(Le,"/").concat(e,"/single"),a).then((function(e){var a=e.data;return qe(a)}))},Ge=function(e,a){return H.put("".concat(Le,"/").concat(e,"/singleDelete"),a)},Me=t(142),Ye=t.n(Me),Ze=t(150),Xe=t(10),$e=Object(j.a)((function(e){return{root:{},menuButton:{marginRight:e.spacing(2)},search:Object(l.a)({flexGrow:1,position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Xe.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Xe.d)(e.palette.common.white,.25)},marginRight:0,width:"100%"},e.breakpoints.up("sm"),{marginRight:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(l.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));function ea(){var e=$e();return r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(Ye.a,null)),r.a.createElement(Ze.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}}))}var aa=t(42);var ta=function(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"If you don't wanna be here, ",r.a.createElement(h.a,{component:re,to:"/",color:"secondary"},"Go back")," to the main menu.")},na=t(284),ra=t(95),ca=t.n(ra),oa=t(302),la=t(280),ia=t(278),ua=t(279),sa=t(277),ma=t(126),da=r.a.forwardRef((function(e,a){return r.a.createElement(ma.a,Object.assign({direction:"up",ref:a},e))}));function pa(e){var a=e.open,t=e.message,n=e.handleClose,c=e.handleOk;return r.a.createElement(oa.a,{open:!!a,TransitionComponent:da,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(sa.a,{id:"alert-dialog-slide-title"},"Delete Recording"),r.a.createElement(ia.a,null,r.a.isValidElement(t)?t:r.a.createElement(ua.a,{id:"alert-dialog-slide-description"},t)),r.a.createElement(la.a,null,r.a.createElement(s.a,{onClick:n,color:"primary"},"Disagree"),r.a.createElement(s.a,{onClick:function(){return c(a)},color:"primary"},"Agree")))}var fa=t(69),Ea=t(304),ha=t(289),ga=t(301),ba=t(281),va=function(e){var a=e.arr,t=e.obj,n=e.handle,c=e.student,o=e.stage;return r.a.createElement(te.a,{row:!0},a.map((function(e,a){var l=!!t[e.key][o];return r.a.createElement(g.a,{item:!0,xs:6,key:a},r.a.createElement(f.a,{control:r.a.createElement(ba.a,{checked:l,value:l,onChange:n(e.key,c,o),color:"primary"}),label:e.label}))})))},ya=[{key:"confident",label:"Confident",value:!1},{key:"lost",label:"Lost",value:!1},{key:"nervous",label:"Nervous",value:!1},{key:"nothing",label:"I didn't feel anything",value:!1}],Oa=[{key:"startingConversation",label:"Starting the Conversation",value:[!1,!1,!1]},{key:"risk",label:"Take the risk to speak",value:[!1,!1,!1]},{key:"opinion",label:"Say my opinion",value:[!1,!1,!1]},{key:"askClarification",label:"Ask clarification questions",value:[!1,!1,!1]},{key:"provClarification",label:"Provide clarifications",value:[!1,!1,!1]},{key:"askExamples",label:"Ask for examples",value:[!1,!1,!1]},{key:"giveExamples",label:"Give examples",value:[!1,!1,!1]},{key:"understanding",label:"Show understanding",value:[!1,!1,!1]},{key:"eyeContact",label:"Ask for my partner's opinion",value:[!1,!1,!1]},{key:"saySomething",label:"Encourage myself to say something",value:[!1,!1,!1]},{key:"filters",label:"Use fillers",value:[!1,!1,!1]}],ja=t(297),ka=t(282),wa=t(63),Sa=t(295);function Ca(e){var a=e.children,t=e.value,n=e.index,c=Object(wa.a)(e,["children","value","index"]);return r.a.createElement(y.a,Object.assign({component:"div",role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),r.a.createElement(Sa.a,{p:3},a))}var Aa=t(283),xa=function(e,a,t){var n=k(),c=r.a.useState(0),o=Object(u.a)(c,2),l=o[0],i=o[1];return r.a.createElement(O.a,{component:"main"},r.a.createElement(d.a,null),r.a.createElement("div",{className:n.paper},r.a.createElement(ka.a,{position:"static",color:"default"},r.a.createElement(ja.a,{value:l,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",onChange:function(e,a){return i(a)}},a.map((function(e,a){return r.a.createElement(Aa.a,Object.assign({key:a,label:e},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(a)))})))),t.map((function(a,t){return r.a.createElement(Ca,{value:l,index:t,key:t,style:{width:"100%"}},r.a.createElement(g.a,{container:!0,spacing:3},t===l&&r.a.createElement(e,Object.assign({},a,{index:t}))))}))))},Na=function(e){return e.reduce((function(e,a){return e[a.key]=a.value,e}),{})},Ia=function(e){var a=e.recording,t=e.fn,n=e.stage,c=a.cognitive,o=a.labels,s=r.a.useState(!1),m=Object(u.a)(s,2),d=m[0],p=m[1],f=r.a.useReducer((function(e,r){var c=r.type,o=r.payload,l=null;switch(c){case 0:l=[Object(i.a)(Object(i.a)({},e[0]),o),e[1]];break;case 1:l=[e[0],Object(i.a)(Object(i.a)({},e[1]),o)];break;case"fill":l=o,p(!0);break;case"preFill":l=e;break;default:l=e}var u=_e("cognitive")(a,l,n);return console.log(u),t(u),l}),[Na(Oa),Na(Oa)]),E=Object(u.a)(f,2),h=E[0],g=E[1];r.a.useEffect((function(){c&&c.length&&!d?g({type:"fill",payload:c}):g({type:"preFill",payload:[]})}),[c,d]);var b=function(e,a){return function(t){g({type:a,payload:Object(l.a)({},e,h[a][e].map((function(e,a){return a===n?!e:e})))})}},v=[{student:0,obj:h[0],handle:b,arr:Oa,stage:n},{student:1,obj:h[1],handle:b,arr:Oa,stage:n}];return xa(va,o,v)},_a=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,Ra=/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)?/gi,Pa={email:function(e){var a;return e?_a.test(e)||(a="Invalid email pattern"):a="Email is required",a},name:function(e){var a;return(!e||e.length<3)&&(a="Name is required"),a},studentA:function(e){var a;return(!e||e.length<3)&&(a="The first student is required"),a},studentB:function(e){var a;return(!e||e.length<3)&&(a="The second student is required"),a},comments:function(e){var a;return e.length>140&&(a="Just a tweet... no more than 140 characters"),a},password:function(e){var a;return(!e||e.length<3)&&(a="Password is required"),a},image:function(e){var a;return Ra.test(e)||(a="Invalid Url Pattern"),a},notesTitle:function(e){var a;return e||(a="We need a title for your Notes x"),a},markDown:function(e){var a;return(!e||e.length<140)&&(a="Give me at least a tweet!!"),a}},Ta=t(268),Ba=t(296),Da=t(267),Fa=t(285),Wa=function(e){Object(x.a)(t,e);var a=Object(N.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={content:e.props.recording.id?e.props.recording:Nt,users:[],loading:!0,errors:{name:e.props.recording.name?void 0:Pa.name(),studentA:e.props.recording.studentA?void 0:Pa.studentA(),studentB:e.props.recording.studentB?void 0:Pa.studentB()}},e.hasErrors=function(){var a=e.state.content;return Object.keys(a).some((function(e){var t=a[e];return Pa[e]&&Pa[e](t)}))},e.handleChange=function(a){var t=a.target,n=t.name,r=t.value,c=e.state,o=c.content,u=c.errors;e.setState({content:Object(i.a)(Object(i.a)({},o),{},Object(l.a)({},n,r)),errors:Object(i.a)(Object(i.a)({},u),{},Object(l.a)({},n,Pa[n]&&Pa[n](r)))},(function(){var a=e.state,t=a.content,n=a.errors;e.hasErrors()?e.props.fn(Object(i.a)(Object(i.a)({},t),{},{hasError:!0,errors:n})):e.props.fn(Object(i.a)(Object(i.a)({},t),{},{students:[t.studentA,t.studentB]}))}))},e}return Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;le().then((function(a){e.setState({users:a,loading:!1})}))}},{key:"componentDidUpdate",value:function(e,a){this.props.recording.id!==e.recording.id&&this.setState({content:this.props.recording,errors:{}})}},{key:"render",value:function(){var e=this.state,a=e.content,t=e.users,n=e.loading;return r.a.createElement(O.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",null,r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(p.a,{onChange:this.handleChange,value:a.name,error:!!this.state.errors.name,variant:"outlined",fullWidth:!0,id:"name",name:"name",label:"Recording Name",autoComplete:"fname"})),n?r.a.createElement(na.a,null):t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{item:!0,xs:12,sm:6},r.a.createElement(Da.a,{variant:"outlined",fullWidth:!0},r.a.createElement(Ta.a,{id:"studentA-label",style:{background:"#fff"}},"First Student"),r.a.createElement(Ba.a,{labelId:"studentA-label",id:"studentA",name:"studentA",value:a.studentA,onChange:this.handleChange,label:"First Student",required:!0},t.map((function(e){var a=e.id,t=e.name,n=e.lastName;return r.a.createElement(Fa.a,{key:a,value:a},"".concat(t," ").concat(n))}))))),r.a.createElement(g.a,{item:!0,xs:12,sm:6},r.a.createElement(Da.a,{variant:"outlined",fullWidth:!0},r.a.createElement(Ta.a,{id:"studentB-label",style:{background:"#fff"}},"Second Student"),r.a.createElement(Ba.a,{labelId:"studentB-label",id:"studentB",name:"studentB",value:a.studentB,onChange:this.handleChange,label:"Second Student",required:!0},t.map((function(e){var a=e.id,t=e.name,n=e.lastName;return r.a.createElement(Fa.a,{key:a,value:a},"".concat(t," ").concat(n))})))))):r.a.createElement("div",{style:{textAlign:"center"}}," First, please add some users "),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(p.a,{onChange:this.handleChange,value:a.comments,variant:"outlined",fullWidth:!0,id:"comments",label:"Some extra comments",name:"comments",rows:"4",multiline:!0,autoComplete:"fcomments"})))))}}]),t}(r.a.Component),Ua=Object(j.a)((function(e){return{card:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{backgroundColor:"#1565c0",width:160,display:"flex",justifyContent:"flex-end",flexDirection:"column"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38},saveIcon:{margin:"auto",color:"#fff"}}})),La=t(148),qa=t(144),Ha=t.n(qa),Va=t(286),Ja=t(220),Ka=t(143),Qa=t.n(Ka),za=t(145),Ga=t.n(za),Ma=t(92),Ya=t.n(Ma);function Za(e){var a=e.handleSave,t=e.title,c=Ua(),o=Object(n.useState)(!1),l=Object(u.a)(o,2),i=l[0],s=l[1],m=Object(n.useState)(!1),d=Object(u.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(new Blob),h=Object(u.a)(E,2),g=h[0],b=h[1],v=function(){var e=Object(M.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,a(g);case 3:f(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:c.details},r.a.createElement(Va.a,{className:c.content},r.a.createElement(y.a,{component:"h5",variant:"h5"}," ",t," ")),r.a.createElement("div",{className:c.controls},r.a.createElement(Ja.a,{onClick:function(){return s(!i)},"aria-label":"play/pause"},i?r.a.createElement(Qa.a,{className:c.playIcon}):r.a.createElement(ge.a,{className:c.playIcon})))),g.blobURL?r.a.createElement(Xa,{onSave:v,uploading:p,handleCancel:function(){return b(new Blob)},classes:c}):r.a.createElement(La.a,{className:c.cover,record:i,onStop:b,strokeColor:"#ffffff",backgroundColor:Ha.a[800]}))}var Xa=function(e){var a=e.onSave,t=e.uploading,n=e.handleCancel,c=e.classes;return r.a.createElement("div",{className:c.cover},r.a.createElement("div",{className:c.saveIcon},r.a.createElement(Ja.a,{onClick:a,"aria-label":"previous"},t?r.a.createElement(K.a,{className:c.progress}):r.a.createElement(Ga.a,{className:c.saveIcon})),r.a.createElement(Ja.a,{onClick:n,"aria-label":"previous"},r.a.createElement(Ya.a,null))))},$a=(t(202),t(146)),et=t.n($a),at=function(e,a,t){var n=a.query,r=a.audioName,c=new FileReader;return c.readAsDataURL(t),new Promise((function(a,t){c.onerror=function(){c.abort(),t(new DOMException("Problem parsing file"))},c.onload=Object(M.a)(G.a.mark((function o(){var l;return G.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:l=c.result.split(",")[1],ze(e,{query:n,audioName:r,audio:l}).then((function(e){a(e)}),(function(e){console.error("Invalid status saving audio message: "+e.status),t(e)}));case 3:case"end":return o.stop()}}),o)})))}))},tt=t(287),nt=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://s2r2.app/api",REACT_APP_DEV_API:"http://localhost:3001/api",REACT_APP_DEV_BASE_URL:"http://localhost:3000",REACT_APP_PRO_BASE_URL:"https://s2r2.app"}),rt=nt.NODE_ENV,ct=nt.REACT_APP_API_URL,ot=nt.REACT_APP_DEV_API;function lt(e){var a=e.recording,t=e.audioId,n=e.title,c=e.callback,o=e.updateQuery,l=e.deleteQuery,i=e.error,u=function(){var e=Object(M.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(o),e.next=4,at(a.id,o,t);case 4:return n=e.sent,c&&c(n),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(M.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ge(a.id,{audioName:t,query:l}).then(c(i),(function(e){console.error(e)})).catch(console.error);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(it,{handleSave:u,handleDelete:s,audioId:t,title:n})}var it=function(e){var a=e.handleSave,t=e.handleDelete,n=e.audioId,c=e.title;return r.a.createElement(O.a,{component:"main"},r.a.createElement(d.a,null),r.a.createElement(tt.a,{style:{display:"flex",height:"100%"}},r.a.createElement(Za,{handleSave:function(e){var t=e.blob;return a(t)},title:c}),r.a.createElement(ut,{onDelete:t,audioId:n})))},ut=function(e){var a=e.audioId,t=e.onDelete,n="development"===rt?ot:ct;return!!a&&r.a.createElement("div",{style:{width:"100%",alignSelf:"center",overflow:"scroll"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(et.a,{src:"".concat(n,"/messages/").concat(a)}),t&&r.a.createElement(Ja.a,{style:{margin:".5em 0"},onClick:t,"aria-label":"delete audio"},r.a.createElement(Ya.a,null))))},st=t(93),mt=[{feel:"",help:void 0,audioId:void 0},{feel:"",help:void 0,audioId:void 0}],dt=function(e,a,t){return Object(i.a)(Object(i.a)({},e),a.map((function(e){return Object.values(e).some((function(e){return void 0===e||""===e}))})).some((function(e){return!!e}))?{hasError:!0,errors:{socioAffective:"At least one value should be selected for both students."}}:{hasError:!1,socioAffective:a})},pt=function(e){var a=e.questions,t=e.feel,n=e.handle,c=e.help,o=(e.callback,e.data),l=e.index;return console.log(o),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:12,sm:6},r.a.createElement("h3",null,a.feel),r.a.createElement(Et,Object(i.a)(Object(i.a)({},t),{},{handle:n}))),r.a.createElement(g.a,{item:!0,xs:12,sm:6},r.a.createElement("h3",null,a.help),r.a.createElement(te.a,{row:!0},r.a.createElement(Z.a,{name:t.student,value:c.value,onChange:function(e){return n(e,t.student,"help")}},r.a.createElement(f.a,{value:"yes",control:r.a.createElement(Y.a,null),label:"Yes, they did"}),r.a.createElement(f.a,{value:"no",control:r.a.createElement(Y.a,null),label:"No, they didn't"}))))),r.a.createElement(g.a,null,r.a.createElement(te.a,{row:!0},r.a.createElement(lt,Object.assign({recording:o},ft(o,l,n))))))},ft=function(e,a,t){var n=function(a,t){var n=e.socioAffective;return{audioName:t,query:{socioAffective:a?[n[0],Object(i.a)(Object(i.a)({},n[1]),{audioId:t})]:[Object(i.a)(Object(i.a)({},n[0]),{audioId:t}),n[1]]}}};return{audioId:e.socioAffective.length&&e.socioAffective[a]&&e.socioAffective[a].audioId,title:"Feedback: \n ".concat(e.labels[a]),error:Object(i.a)(Object(i.a)({},e),{},{socioAffective:{},hasError:!1,errors:{}}),updateQuery:n(a,Object(st.v4)()),deleteQuery:e.socioAffective.length&&e.socioAffective[a]&&n(a,e.socioAffective[a].audioId),callback:function(e){var n=e.socioAffective,r=(Array.isArray(n)&&n[a]).audioId;t({target:{value:r||mt}},r?a?"B":"A":"delete","audioId")}}},Et=function(e){var a=e.arr,t=e.value,n=e.handle,c=e.student;return r.a.createElement(te.a,{row:!0},r.a.createElement(Z.a,{name:c,value:t,onChange:function(e){return n(e,c,"feel")}},a.map((function(e,a){return r.a.createElement(f.a,{key:a,value:e.key,control:r.a.createElement(Y.a,null),label:e.label})}))))},ht=function(e){var a=e.recording,t=e.fn,n=a.socioAffective,c=a.labels,o=r.a.useReducer((function(e,n){var r=n.type,c=n.payload,o=null;switch(r){case"A":o=[Object(i.a)(Object(i.a)({},e[0]),c),e[1]];break;case"B":o=[e[0],Object(i.a)(Object(i.a)({},e[1]),c)];break;case"fill":o=c;break;case"delete":o=c.audioId;break;default:o=e}var l=dt(a,o);return t(l),o}),Object(aa.isEmpty)(n)?mt:n),s=Object(u.a)(o,2),m=s[0],d=s[1];r.a.useEffect((function(){d({type:"fill",payload:Object(aa.isEmpty)(n)?mt:n})}),[]);var p=function(e,a,t){var n=e.target.value;d({type:a,payload:Object(l.a)({},t,"help"===t?"yes"===n:n)})},f={feel:"How did you feel when using strategies?",help:"Did they help you to talk to your partner?"},E=a.students.map((function(e,n){return{questions:f,feel:{arr:ya,student:n?"B":"A",value:m[n]&&m[n].feel},handle:p,help:{value:m[n]&&"undefined"!==typeof m[n].help&&(m[n].help?"yes":"no")},callback:t,data:Object(i.a)(Object(i.a)({},a),{},{socioAffective:m})}}));return xa(pt,c,E)};var gt=function(e,a,t){switch(e){case 0:return r.a.createElement(Wa,{fn:a,recording:t});case 1:return r.a.createElement(Ia,{stage:0,fn:a,recording:t});case 2:var n=Object(st.v4)();return r.a.createElement(lt,{callback:function(e){""===e.audioId?a(e):a(Object(i.a)(Object(i.a)({},e),{},{hasError:!1,errors:{}}))},audioId:t.audioId,recording:t,title:t.name,updateQuery:{query:{audioId:n},audioName:n},deleteQuery:{query:{audioId:""},audioName:t.audioId},error:Object(i.a)(Object(i.a)({},t),{},{audioId:"",hasError:!0,errors:{x:"We need an audio recording"}})});case 3:return r.a.createElement(Ia,{stage:1,fn:a,recording:t});case 4:return t.students&&r.a.createElement(ht,{fn:a,recording:t});case 5:return r.a.createElement(Ia,{stage:2,fn:a,recording:t});default:throw new Error("Unknown step")}},bt=function(e){var a=e.step,t=e.classes,n=e.back,c=e.next,o=e.steps,l=e.blocked,i=e.isStudent?a>1:!!a;return r.a.createElement("div",{className:t.buttons},i&&r.a.createElement(s.a,{onClick:n,className:t.button},"Back"),r.a.createElement(s.a,{disabled:l,variant:"contained",color:"primary",onClick:c,className:t.button},a===o.length-1?"Resume":"Next"))};var vt,yt=t(270),Ot=t(222),jt=t(288),kt=(vt=Oa,function(e,a){return function(t){return Object.keys(e[a]).filter((function(t){return Array.isArray(e[a][t])})).filter((function(n){return e[a][n][t]})).map((function(e){return vt.filter((function(a){return a.key===e})).map((function(e){return e.label}))}))}}),wt=function(e){var a=e.data,t=a.name,n=a.labels,c=At(a);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h5",gutterBottom:!0},"Thank you for your participation in ".concat(t,".")),r.a.createElement(y.a,{variant:"subtitle1"},"Here you will see all your inputs and have a discussion with your teacher and partner"),xa(St,n,c))},St=function(e){var a=e.before_talking,t=e.talking,n=e.help,c=e.after_talking,o=e.feedback,l=e.socio_affective,i=e.future;return r.a.createElement(O.a,null,r.a.createElement(g.a,{container:!0},r.a.createElement(Ct,{data:a}),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement("h3",{style:{marginBottom:0}},t.label),r.a.createElement(ut,{audioId:t.content})),r.a.createElement(Ct,{data:c}),r.a.createElement(Ct,{data:l}),r.a.createElement(Ct,{data:n}),!!o.content&&r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement("h3",{style:{marginBottom:0}},o.label),r.a.createElement(ut,{audioId:o.content})),r.a.createElement(Ct,{data:i})))},Ct=function(e){var a=e.data,t=a.label,n=a.content;return r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement("h3",{style:{marginBottom:0}},t),r.a.createElement(yt.a,{style:{paddingTop:0},dense:!0},n.map((function(e,a){return!!e&&r.a.createElement(Ot.a,{key:a},r.a.createElement(jt.a,{primary:e}))}))))},At=function(e){return e.students.map((function(a,t){var n=kt(e.cognitive,t),r=Array.isArray(e.socioAffective)&&e.socioAffective.length?e.socioAffective[t]:{},c=r.feel,o=r.audioId,l=ya.find((function(e){return e.key===c}));return{before_talking:{label:"The strategies you chose before talking \ud83e\uddd0",content:n(0)},talking:{label:"Let's play your recording \ud83c\udfb6",content:e.audioId},after_talking:{label:"The strategies you really applied",content:n(1)},socio_affective:{label:"How did you feel when using strategies?",content:[l&&l.label]},help:{label:"Did they help you to talk to your partner?",content:e.socioAffective[0].help?["Yes, they did"]:["No, they didn't"]},feedback:{label:"Some feedback",content:o},future:{label:"What is the plan for the next time?",content:n(2)}}}))},xt=t(108),Nt={id:"",name:"",comments:"",studentA:"",studentB:""},It=["Set-Up","Before talking","Talking","After talking","How about you?","Future Recordings"];function _t(e){var a=Pe(),t=e.match.params.id,n="student"===e.user.data.role,c=r.a.useState(n?1:0),o=Object(u.a)(c,2),l=o[0],s=o[1],m=r.a.useState(!1),p=Object(u.a)(m,2),f=p[0],E=p[1],h=r.a.useState({}),g=Object(u.a)(h,2),b=g[0],v=g[1],O=r.a.useState(It),j=Object(u.a)(O,2),k=j[0],w=j[1],S=r.a.useState(!0),C=Object(u.a)(S,2),A=C[0],x=C[1],N=r.a.useState(!1),I=Object(u.a)(N,2),_=I[0],R=I[1],P=Object(xt.useSnackbar)().enqueueSnackbar,T=function(e){return P(e,{variant:"warning"})};r.a.useEffect((function(){t?Ve(t).then((function(e){w([e.name].concat(Object(fa.a)(It.slice(1,It.length)))),v(e),E(!0),x(!1),e.complete&&s(k.length)})):(x(!1),v(Nt),w(It),E(!1))}),[t,k.length]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Ue.a,{className:a.paper},r.a.createElement(y.a,{component:"h1",variant:"h4",align:"center"},k[l]),r.a.createElement(Ea.a,{activeStep:l,className:a.stepper},k.map((function(e){return r.a.createElement(ha.a,{key:e},r.a.createElement(ga.a,null,e))}))),r.a.createElement(r.a.Fragment,null,l===k.length?r.a.createElement(wt,{data:b}):r.a.createElement(r.a.Fragment,null,A?r.a.createElement(na.a,null):gt(l,v,b),r.a.createElement(bt,{steps:k,isStudent:n,blocked:_,step:l,classes:a,back:function(){P("Okey, we won\xb4t save that...",{autoHideDuration:1e3}),v(Object(i.a)(Object(i.a)({},b),{},{hasError:!1,errors:{}})),s(l-1)},next:function(){if(b.hasError)Object.values(b.errors).forEach((function(e){return e&&T(e)}));else if(P("Saving...",{variant:"success",autoHideDuration:800}),0!==l||f){if(f){var a=l+1<k.length?Object(i.a)({},b):Object(i.a)(Object(i.a)({},b),{},{complete:!0});Ke(t,a).then((function(e){v(e),w([e.name].concat(Object(fa.a)(It.slice(1,It.length)))),s(l+1)}),(function(e){e.response?T(e.response.data.message):console.error(e)}))}}else R(!0),He(b).then((function(a){E(!0),v(a),e.history.push("/record/".concat(a.id)),s(l+1),R(!1)}),(function(e){e.response?(R(!1),T(e.response.data.message)):console.error(e)}))}})))),!n&&t&&l<1&&r.a.createElement(Rt,null),r.a.createElement(ta,null)))}function Rt(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"This is not what you are looking for?, ",r.a.createElement(h.a,{color:"primary",component:re,to:"/new-record"},"Click here"),", and Go to create a new recording.")}var Pt=P((function(e){return r.a.createElement(xt.SnackbarProvider,{maxSnack:3},r.a.createElement(_t,e))}));function Tt(){var e=Pe(),a=r.a.useState([]),t=Object(u.a)(a,2),n=t[0],c=t[1],o=r.a.useState(!1),l=Object(u.a)(o,2),i=l[0],s=l[1],m=r.a.useState("This action can not be undone."),p=Object(u.a)(m,2),f=p[0],E=p[1],g=function(){var e=Object(M.a)(G.a.mark((function e(){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je();case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=r.a.useState(!1),v=Object(u.a)(b,2),O=v[0],j=v[1],k=function(){var e=Object(M.a)(G.a.mark((function e(a){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0),Qe(a).then((function(){g(),s(!1),j(!1)}),(function(e){s(!1),E("Ups, we have an error trying to delete the file. Contact with the admin"),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.useEffect((function(){g()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(Ue.a,{className:e.paper},r.a.createElement(y.a,{component:"h1",variant:"h4",align:"center"},"Recordings"),r.a.createElement(ea,null),r.a.createElement(Te.a,{className:e.table},r.a.createElement(Fe.a,null,r.a.createElement(We.a,null,r.a.createElement(De.a,null,"Name"),r.a.createElement(De.a,{align:"right"},"student\xa0A"),r.a.createElement(De.a,{align:"right"},"student\xa0B"),r.a.createElement(De.a,{align:"right"},"Date"),r.a.createElement(De.a,{align:"right"},"Delete"))),r.a.createElement(Be.a,null,n.length?n.map((function(e,a){return r.a.createElement(We.a,{key:a},e.error?r.a.createElement(De.a,{scope:"row",component:"th",colSpan:5},e.error):r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{scope:"row",component:"th"},r.a.createElement(h.a,{color:"inherit",component:re,to:"/record/".concat(e.id,"/checkout")},Object(aa.upperFirst)(e.name))),r.a.createElement(De.a,{align:"right"},e.studentA),r.a.createElement(De.a,{align:"right"},e.studentB),!!e.date&&r.a.createElement(De.a,{align:"right"},e.date.split("T")[0]),r.a.createElement(De.a,{align:"right"},r.a.createElement(ca.a,{onClick:function(){return j(e.id)}}))))})):r.a.createElement(We.a,null,r.a.createElement(De.a,{colSpan:5},r.a.createElement(na.a,null)))))),r.a.createElement(Rt,null),r.a.createElement(ta,null)),r.a.createElement(pa,{open:O,handleClose:function(){return j(!1)},handleOk:k,title:"Are you sure?",message:i?r.a.createElement(na.a,null):f}))}var Bt=t(147),Dt=t.n(Bt);function Ft(){var e=Pe(),a=r.a.useState([]),t=Object(u.a)(a,2),n=t[0],c=t[1],o=r.a.useState(!1),l=Object(u.a)(o,2),i=l[0],s=l[1],m=r.a.useState("This action can not be undone."),p=Object(u.a)(m,2),f=p[0],E=p[1],g=function(){var e=Object(M.a)(G.a.mark((function e(){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=r.a.useState(!1),v=Object(u.a)(b,2),O=v[0],j=v[1],k=function(){var e=Object(M.a)(G.a.mark((function e(a){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0),ue(a).then((function(){g(),s(!1),j(!1)}),(function(e){s(!1),E("Ups, we have an error trying to delete the User. Contact with the admin"),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.useEffect((function(){g()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(Ue.a,{className:e.paper},r.a.createElement(y.a,{component:"h1",variant:"h4",align:"center"},"Users"),r.a.createElement(ea,null),r.a.createElement(Te.a,{className:e.table},r.a.createElement(Fe.a,null,r.a.createElement(We.a,null,r.a.createElement(De.a,null,"Name"),r.a.createElement(De.a,null,"Last name"),r.a.createElement(De.a,{align:"right"},"e-mail"),r.a.createElement(De.a,{align:"right"},"Edit"),r.a.createElement(De.a,{align:"right"},"Delete"))),r.a.createElement(Be.a,null,n.length?n.map((function(e,a){return r.a.createElement(We.a,{key:a},e.error?r.a.createElement(De.a,{scope:"row",component:"th",colSpan:5},e.error):r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{scope:"row",component:"th"},r.a.createElement(h.a,{color:"inherit",component:re,to:"/user/".concat(e.id)},Object(aa.upperFirst)(e.name))),r.a.createElement(De.a,null,e.lastName),r.a.createElement(De.a,{align:"right"},e.email),r.a.createElement(De.a,{align:"right",scope:"row",component:"th"},r.a.createElement(h.a,{color:"inherit",component:re,to:"/user/".concat(e.id,"/edit")},r.a.createElement(Dt.a,null))),r.a.createElement(De.a,{align:"right"},r.a.createElement(ca.a,{onClick:function(){return j(e.id)}}))))})):r.a.createElement(We.a,null,r.a.createElement(De.a,{colSpan:5},r.a.createElement(na.a,null)))))),r.a.createElement(Rt,null),r.a.createElement(ta,null)),r.a.createElement(pa,{open:O,handleClose:function(){return j(!1)},handleOk:k,title:"Are you sure?",message:i?r.a.createElement(na.a,null):f}))}var Wt=function(e){var a=e.component,t=Object(wa.a)(e,["component"]);return r.a.createElement(_.Consumer,null,(function(e){var n=e.isAuthenticated;return r.a.createElement(J.b,Object.assign({render:function(e){return n()?r.a.createElement(a,e):r.a.createElement(J.a,{to:"/sign-in"})}},t))}))},Ut=function(e){var a=e.component,t=Object(wa.a)(e,["component"]);return r.a.createElement(_.Consumer,null,(function(e){var n=e.isAuthenticated;return r.a.createElement(J.b,Object.assign({render:function(e){return n()?r.a.createElement(J.a,{to:"/"}):r.a.createElement(a,e)}},t))}))},Lt=P((function(e){var a=e.user,t=e.classes,n=a.data,c=n.role,o=n.name;return r.a.createElement("footer",{className:t.footer},r.a.createElement(O.a,{maxWidth:"sm"},r.a.createElement(y.a,{variant:"body1"},"Navigation"),r.a.createElement(y.a,{variant:"body2",color:"textSecondary"},"".concat(Object(aa.upperFirst)(o),", Remember that you can also go to "),Ie(c).slice(1).reverse().map((function(e,a){return r.a.createElement(r.a.Fragment,{key:a},!!a&&" or ",r.a.createElement(h.a,{to:e.link,component:re,color:"primary"},e.label))}))," to specify the general configurations, or simply ",r.a.createElement(h.a,{color:"secondary",to:"/",component:re},"go back"))))})),qt=function(e){return function(a){var t=fe();return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,null),r.a.createElement(O.a,{component:"main",className:t.main,maxWidth:"sm"},r.a.createElement(pe,null),r.a.createElement(y.a,{variant:"h5",gutterBottom:!0},"What do you want to do now?"),r.a.createElement(y.a,{variant:"h6"},"Please fill out the form according to the instructions of the investigator"),r.a.createElement(e,a)),r.a.createElement(Lt,{classes:t}))}},Ht="/user",Vt=function(e){return function(a){return function(t){return H.put("".concat(Ht,"/").concat(a,"/").concat(e),t).then((function(e){return e.data}))}}},Jt=function(e){return function(a){return H.get("".concat(Ht,"/").concat(a,"/").concat(e)).then((function(e){return e.data}))}},Kt={readElf:Jt("elf"),updateElf:Vt("elf"),readEmotion:Jt("emotions"),updateEmotion:Vt("emotions"),readStr:function(e){return Jt("strategy/".concat(e))},updateStr:function(e){return Vt("strategy/".concat(e))}},Qt=function(e){return e.labels.map((function(a){return Object(i.a)(Object(i.a)({},a),{},{value:e.questions[a.key]})}))},zt=function(e){var a=e.update,t=e.get,r=Object(n.useState)({}),c=Object(u.a)(r,2),o=c[0],s=c[1],m=Object(n.useState)("Fetching field forms"),d=Object(u.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),h=Object(u.a)(E,2),g=h[0],b=h[1],v=Object(n.useCallback)(Object(M.a)(G.a.mark((function e(){var a,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,t;case 3:a=e.sent,(n=Qt(a)).length?(console.log("fetching"),s(n),b(!1)):f("We can not fetch the field forms");case 6:case"end":return e.stop()}}),e)}))),[t]);return Object(n.useEffect)((function(){v()}),[v]),{handleChange:function(e){return function(a){a.persist();var t=o.findIndex((function(a){return a.key===e})),n=Object(fa.a)(o);n[t].value="change"===a.type&&"multiple"===n[t].type?Object(i.a)(Object(i.a)({},n[t].value),{},Object(l.a)({},a.target.name,a.target.checked)):isNaN(Number(a.target.value))?a.target.value:Number(a.target.value),s(n)}},handleSubmit:function(e){b(!0),e.preventDefault();var t=o.reduce((function(e,a){return Object(i.a)(Object(i.a)({},e),Object(l.a)({},a.key,a.value))}),{});a(t).then((function(e){s(Qt(e)),b(!1)})).catch(console.error)},values:o,error:p,isLoading:g}},Gt=t(219),Mt=function(e){var a=e.values,t=e.error,n=e.isLoading,c=e.handleChange,o=e.handleSubmit,l=e.classes;return r.a.createElement(O.a,{component:"main"},r.a.createElement(d.a,null),n?r.a.createElement(na.a,{className:l.progress,color:"secondary"}):a.length?r.a.createElement("div",{className:l.paper},r.a.createElement("form",{className:l.form,onSubmit:o,autoComplete:"off"},r.a.createElement(g.a,{container:!0,spacing:2},a.map((function(e){return r.a.createElement(g.a,{item:!0,xs:12,key:e.key},r.a.createElement(Da.a,{component:"fieldset",fullWidth:!0},e.options&&e.options.length?r.a.createElement(te.a,{row:!0},r.a.createElement(Gt.a,{component:"legend"},e.label),"multiple"===e.type?e.options.map((function(a,t){return{opt:a,label:e.labels?e.labels[t]:a}})).map((function(a){var t=a.opt,n=a.label;return r.a.createElement(f.a,{key:t.trim(),control:r.a.createElement(E.a,{checked:e.value[t],onChange:c(e.key),name:t}),label:n})})):r.a.createElement(Z.a,{row:!0,name:e.key,value:e.value||"",onChange:c(e.key)},e.options.map((function(e){return r.a.createElement(f.a,{key:e,value:e,control:r.a.createElement(Y.a,null),label:e})})))):r.a.createElement(p.a,{autoComplete:"off",name:e.key,onChange:c(e.key),value:e.value,variant:"outlined",multiline:!0,rows:3,fullWidth:!0,id:e.key,label:e.label,autoFocus:!0})))}))),r.a.createElement(s.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit},"Save"))):!!t&&r.a.createElement("div",null," ",t," "))},Yt=P(qt((function(e){var a=e.user.data.id,t=k(),n=Kt.updateElf(a),c=Kt.readElf(a),o=zt({update:n,get:c}),l=Object.assign({},o);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"h3"},"Este cuestionario ha sido dise\xf1ado para estudiantes de ingl\xe9s como lengua extranjera que participan en conversaciones por pareja. Por favor lee cada enunciado y selecciona la respuesta marcando con una X la casilla (1,2,3,4,5) que m\xe1s se acerque a tu realidad."),r.a.createElement(Mt,Object.assign({},l,{classes:t})))}))),Zt=P(qt((function(e){var a=e.user.data.id,t=k(),n=Kt.updateEmotion(a),c=Kt.readEmotion(a),o=zt({update:n,get:c}),l=Object.assign({},o);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"body1",gutterBottom:!0},"Scenario 1: You and your partner have to talk in English AND your teacher will check what you are saying."),r.a.createElement(Mt,Object.assign({},l,{classes:t})))}))),Xt={display:"flex",alignItems:"baseline",padding:0},$t=P(qt((function(e){var a=e.user.data.id,t=k(),n=Kt.updateStr(1)(a),c=Kt.readStr(1)(a),o=zt({update:n,get:c}),l=Object.assign({},o);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"body1",gutterBottom:!0},"Este cuestionario ha sido dise\xf1ado para estudiantes de ingl\xe9s como lengua extranjera que participan en conversaciones por pareja. Por favor lee cada enunciado y selecciona la respuesta marcando con una X la casilla (1,2,3,4,5) que m\xe1s se acerque a tu realidad."),r.a.createElement(yt.a,{component:"nav","aria-label":"secondary mailbox folders",style:Xt},["1 es \u201cnunca o casi nunca\u201d","2 \u201cgeneralmente no lo hago\u201d (menos de la mitad de las veces),","3 \u201ca veces\u201d (m\xe1s o menos), ","4 \u201ca menudo\u201d (m\xe1s de la mitad de las veces) ","5 \u201csiempre o casi siempre\u201d"].map((function(e,a){return r.a.createElement(Ot.a,{key:a},r.a.createElement(jt.a,{primary:e}))}))),r.a.createElement(y.a,{variant:"body1",gutterBottom:!0},"Las respuestas en cada enunciado te describen s\xf3lo a ti. No hay respuestas correctas ni incorrectas. T\xf3mate el tiempo necesario para resolver cada \xedtem. Usualmente deber\xedas tardar entre 15-20 minutos para rellenarlo. Si tienes alguna pregunta consulta con el investigador."),r.a.createElement(y.a,{variant:"h6"},"Durante una conversaci\xf3n por parejas yo\u2026"),r.a.createElement(Mt,Object.assign({},l,{classes:t})))})));var en=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.d,null,r.a.createElement(Wt,{exact:!0,path:"/",component:Re}),r.a.createElement(Ut,{exact:!0,path:"/sign-in",component:Q}),r.a.createElement(Wt,{exact:!0,path:"/user",component:se}),r.a.createElement(Wt,{exact:!0,path:"/user/:id/edit",component:se}),r.a.createElement(Wt,{exact:!0,path:"/strategies",component:$t}),r.a.createElement(Wt,{exact:!0,path:"/efl",component:Yt}),r.a.createElement(Wt,{exact:!0,path:"/emotions",component:Zt}),r.a.createElement(Wt,{exact:!0,path:"/new-record",component:Pt}),r.a.createElement(Wt,{path:"/record/:id",component:Pt}),r.a.createElement(Wt,{exact:!0,path:"/recordings",component:Tt}),r.a.createElement(Wt,{exact:!0,path:"/students",component:Ft})))};o.a.render(r.a.createElement(ne.a,null,r.a.createElement(R,null,r.a.createElement(en,null))),document.getElementById("root"))}},[[214,1,2]]]);
//# sourceMappingURL=main.c9785b3a.chunk.js.map